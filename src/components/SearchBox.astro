---
import { useState } from 'react';

// æœç´¢å¼•æ“é€‰é¡¹
const engines = [
  { id: 'comprehensive', name: 'ç»¼åˆ', icon: 'ğŸ”' },
  { id: 'github', name: 'GitHub', icon: 'ğŸ“¦' },
  { id: 'npm', name: 'NPM', icon: 'ğŸ“š' },
  // å¯ä»¥æ·»åŠ æ›´å¤šæœç´¢å¼•æ“
];

// æœç´¢ URLs é…ç½®
const searchUrls = {
  comprehensive: 'https://www.google.com/search?q=',
  github: 'https://github.com/search?q=',
  npm: 'https://www.npmjs.com/search?q='
};
---

<div class="bg-white rounded-lg p-4 shadow-sm">
  <div class="flex gap-4">
    <!-- æœç´¢å¼•æ“é€‰æ‹©ä¸‹æ‹‰èœå• -->
    <div class="relative group">
      <button
        class="flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100"
      >
        <span class="search-engine-icon">ğŸ”</span>
        <span>ç»¼åˆ</span>
        <span class="opacity-50">â–¼</span>
      </button>
      
      <!-- ä¸‹æ‹‰èœå• -->
      <div class="hidden group-hover:block absolute top-full left-0 mt-1 w-48 bg-white rounded-lg shadow-lg border p-2">
        {engines.map(engine => (
          <button
            class="w-full flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100"
            data-engine={engine.id}
          >
            <span>{engine.icon}</span>
            <span>{engine.name}</span>
          </button>
        ))}
      </div>
    </div>

    <!-- æœç´¢è¾“å…¥æ¡† -->
    <div class="flex-1 relative">
      <input
        type="text"
        placeholder="è¾“å…¥å…³é”®è¯æœç´¢..."
        class="w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      
      <!-- æœç´¢å»ºè®®ä¸‹æ‹‰æ¡† (å¯ä»¥é€šè¿‡ JS åŠ¨æ€æ˜¾ç¤º) -->
      <div class="hidden absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-lg border p-2">
        <div class="p-2 hover:bg-gray-100 rounded cursor-pointer">å»ºè®®ç»“æœ 1</div>
        <div class="p-2 hover:bg-gray-100 rounded cursor-pointer">å»ºè®®ç»“æœ 2</div>
      </div>
    </div>
  </div>
</div>

<script>
// å®¢æˆ·ç«¯äº¤äº’é€»è¾‘
document.addEventListener('DOMContentLoaded', () => {
  const searchInput = document.querySelector('input[type="text"]');
  const engineButtons = document.querySelectorAll('[data-engine]');
  const searchEngineIcon = document.querySelector('.search-engine-icon');
  let currentEngine = 'comprehensive';

  // æ›´æ–°æœç´¢å¼•æ“
  engineButtons.forEach(button => {
    button.addEventListener('click', (e) => {
      const engine = button.getAttribute('data-engine');
      if (engine) {
        currentEngine = engine;
        const engineData = engines.find(e => e.id === engine);
        if (engineData) {
          searchEngineIcon.textContent = engineData.icon;
          button.nextElementSibling.textContent = engineData.name;
        }
      }
    });
  });

  // å¤„ç†æœç´¢
  searchInput?.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
      const searchTerm = searchInput.value.trim();
      if (searchTerm) {
        const searchUrl = searchUrls[currentEngine] + encodeURIComponent(searchTerm);
        window.open(searchUrl, '_blank');
      }
    }
  });
});
</script>